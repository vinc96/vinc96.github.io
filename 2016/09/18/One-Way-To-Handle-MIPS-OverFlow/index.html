<!DOCTYPE html>
<html lang="en">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="VinC Cheng" />



<meta name="description" content="IntroductionException handlers, also known as trap handlers or interrupt handlers, can easily be incorporated into a MIPS program. This guide is not intended to be comprehensive but provides the essen">
<meta property="og:type" content="article">
<meta property="og:title" content="One Way To Handle MIPS OverFlow">
<meta property="og:url" content="https://vinc96.github.io/2016/09/18/One-Way-To-Handle-MIPS-OverFlow/index.html">
<meta property="og:site_name" content="(*´∇｀*) VinC |HomePage">
<meta property="og:description" content="IntroductionException handlers, also known as trap handlers or interrupt handlers, can easily be incorporated into a MIPS program. This guide is not intended to be comprehensive but provides the essen">
<meta property="og:updated_time" content="2016-09-18T22:45:46.380Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="One Way To Handle MIPS OverFlow">
<meta name="twitter:description" content="IntroductionException handlers, also known as trap handlers or interrupt handlers, can easily be incorporated into a MIPS program. This guide is not intended to be comprehensive but provides the essen">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="(*´∇｀*) VinC |HomePage" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.ico">





    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/silver/pace-theme-bounce.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>One Way To Handle MIPS OverFlow | (*´∇｀*) VinC |HomePage</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: false,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>



    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-56ff76c972fc0cf9"></script>




</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">VinC Cheng</a></h1>
        </hgroup>

        
        <p class="header-subtitle">UofU</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="true" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        <li>Friends</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">Home</a></li>
                        
                            <li><a href="/archives/">Articles</a></li>
                        
                            <li><a href="/about/">About</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo Official</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub Page</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://github.com/vinc96">VinC Cheng</a>
                    
                      <a class="main-nav-link switch-friends-link" href="/sitemap.xml">SiteMap</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">VinC Cheng</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">VinC Cheng</a></h1>
            </hgroup>
            
            <p class="header-subtitle">UofU</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">Home</a></li>
                
                    <li><a href="/archives/">Articles</a></li>
                
                    <li><a href="/about/">About</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me"/>
</nav>
      <div class="body-wrap"><article id="post-One-Way-To-Handle-MIPS-OverFlow" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/09/18/One-Way-To-Handle-MIPS-OverFlow/" class="article-date">
      <time datetime="2016-09-18T22:02:02.000Z" itemprop="datePublished">Sep 18</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      One Way To Handle MIPS OverFlow
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Exception handlers, also known as trap handlers or interrupt handlers, can easily be incorporated into a MIPS program. This guide is not intended to be comprehensive but provides the essential information for writing and using exception handlers.</p>
<a id="more"></a>
<p>Although the same mechanism services all three, exceptions, traps and interrupts are all distinct from each other. Exceptions are caused by exceptional conditions that occur at runtime such as invalid memory address references. Traps are caused by instructions constructed especially for this purpose, listed below. Interrupts are caused by external devices.</p>
<p>MARS partially but not completely implements the exception and interrupt mechanism of SPIM.</p>
<h2 id="Essential-Facts"><a href="#Essential-Facts" class="headerlink" title="Essential Facts"></a>Essential Facts</h2><p>Some essential facts about writing and using exception handlers include:</p>
<ul>
<li>MARS simulates basic elements of the MIPS32 exception mechanism.</li>
<li>The MIPS instruction set includes a number of instructions that conditionally trigger a trap exception based on the relative values of two registers or of a constant and a register: teq, teqi (trap if equal), tne, tnei (trap if not equal), tge, tgeu, tgei, tgeiu (trap if greater than or equal), tlt, tltu, tlti, tltiu (trap if less than)</li>
<li>When an exception occurs,<ol>
<li>Coprocessor 0 register $12 (status) bit 1 is set</li>
<li>Coprocessor 0 register $13 (cause) bits 2-6 are set to the exception type (codes below)</li>
<li>Coprocessor 0 register $14 (epc) is set to the address of the instruction that triggered the exception</li>
<li>If the exception was caused by an invalid memory address, Coprocessor 0 register $8 (vaddr) is set to the invalid address.</li>
<li>Execution flow jumps to the MIPS instruction at memory location 0x800000180. This address in the kernel text segment (.ktext directive) is the standard MIPS32 exception handler location. The only way to change it in MARS is to change the MIPS memory configuration through the Settings menu item Memory Configuration.</li>
</ol>
</li>
<li>There are three ways to include an exception handler in a MIPS program<br>1.Write the exception handler in the same file as the regular program. An example of this is presented below.<ol>
<li>Write the exception handler in a separate file, store that file in the same directory as the regular program, and select the Settings menu item “Assemble all files in directory”</li>
<li>Write the exception handler in a separate file, store that file in any directory, then open the “Exception Handler…” dialog in the Settings menu, check the check box and browse to that file.</li>
</ol>
</li>
<li>If there is no instruction at location 0x800000180, MARS will terminate the MIPS program with an appropriate error message.</li>
<li>The exception handler can return control to the program using the eret instruction. This will place the EPC register \$14 value into the Program Counter, so be sure to increment \$14 by 4 before returning to skip over the instruction that caused the exception. The mfc0 and mtc0 instructions are used to read from and write to Coprocessor 0 registers.</li>
<li>Bits 8-15 of the Cause register \$13 can also be used to indicate pending interrupts. Currently this is used only by the Keyboard and Display Simulator Tool, where bit 8 represents a keyboard interrupt and bit 9 represents a display interrupt. For more details, see the Help panel for that Tool.</li>
<li>Exception types declared in mars.simulator.Exceptions, but not necessarily implemented, are ADDRESS_EXCEPTION_LOAD (4), ADDRESS_EXCEPTION_STORE (5), SYSCALL_EXCEPTION (8), BREAKPOINT_EXCEPTION (9), RESERVED_INSTRUCTION_EXCEPTION (10), ARITHMETIC_OVERFLOW_EXCEPTION (12), TRAP_EXCEPTION(13), DIVIDE_BY_ZERO_EXCEPTION (15), FLOATING_POINT_OVERFLOW (16), and FLOATING_POINT_UNDERFLOW (17).</li>
<li>When writing a non-trivial exception handler, your handler must first save general purpose register contents, then restore them before returning.</li>
</ul>
<h2 id="Example-of-Trap-Handler"><a href="#Example-of-Trap-Handler" class="headerlink" title="Example of Trap Handler"></a>Example of Trap Handler</h2><p>The sample MIPS program below will immediately generate a trap exception because the trap condition evaluates true, control jumps to the exception handler, the exception handler returns control to the instruction following the one that triggered the exception, then the program terminates normally.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">    .text</div><div class="line">main:</div><div class="line">   teqi $t0,0     # immediately trap because $t0 contains 0</div><div class="line">   li   $v0, 10   # After return from exception handler, specify exit service</div><div class="line">   syscall        # terminate normally</div><div class="line"></div><div class="line"># Trap handler in the standard MIPS32 kernel text segment</div><div class="line"></div><div class="line">   .ktext 0x80000180</div><div class="line">   move $k0,$v0   # Save $v0 value</div><div class="line">   move $k1,$a0   # Save $a0 value</div><div class="line">   la   $a0, msg  # address of string to print</div><div class="line">   li   $v0, 4    # Print String service</div><div class="line">   syscall</div><div class="line">   move $v0,$k0   # Restore $v0</div><div class="line">   move $a0,$k1   # Restore $a0</div><div class="line">   mfc0 $k0,$14   # Coprocessor 0 register $14 has address of trapping instruction</div><div class="line">   addi $k0,$k0,4 # Add 4 to point to next instruction</div><div class="line">   mtc0 $k0,$14   # Store new address back into $14</div><div class="line">   eret           # Error return; set PC to value in $14</div><div class="line">   .kdata   </div><div class="line">msg:   </div><div class="line">   .asciiz &quot;Trap generated&quot;</div></pre></td></tr></table></figure></p>
<h2 id="Widely-Used-Exception-Handler"><a href="#Widely-Used-Exception-Handler" class="headerlink" title="Widely Used Exception Handler"></a>Widely Used Exception Handler</h2><p>The exception handler exceptions.s provided with the SPIM simulator will assemble and run under MARS. The MARS assembler will generate warnings because this program contains directives that it does not recognize, but as long as the setting “Assembler warnings are considered errors” is not set this will not cause any problems.</p>
<p>  Origin Article : <a href="http://courses.missouristate.edu/KenVollmar/mars/Help/MarsExceptions.html" target="_blank" rel="external">Writing and Using MIPS exception handlers in MARS</a></p>

      
    </div>
    
  </div>
  
    


    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2016/09/21/Google-releases-Allo-an-AI-infused-messaging-app/">
                    Google releases Allo: an AI-infused messaging app
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2016/09/17/StylishTheme-AsukaGoogle/">
                    StylishTheme_AsukaGoogle
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Essential-Facts"><span class="toc-number">2.</span> <span class="toc-text">Essential Facts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Example-of-Trap-Handler"><span class="toc-number">3.</span> <span class="toc-text">Example of Trap Handler</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Widely-Used-Exception-Handler"><span class="toc-number">4.</span> <span class="toc-text">Widely Used Exception Handler</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="Hide"  title="Show or Hide Table of Contents">

    <script>
        yiliaConfig.toc = ["Hide", "Show", !!"false"];
    </script>



    
<div class="share">
    

    
        <div class="addthis_sharing_toolbox"></div>
    
</div>







    
        <section id="comments">
    <style> aside.comment-bar { margin: auto 30px; }</style>
    <div id="disqus_thread"></div>
    <script>
        var disqus_config = function(){
            this.page.url = 'https://vinc96.github.io/2016/09/18/One-Way-To-Handle-MIPS-OverFlow/';
            this.page.identifier = '2016/09/18/One-Way-To-Handle-MIPS-OverFlow/';
        };
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = '//https-vinc96-github-io.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }
    </script>
    
    <script> loadComment(); </script>

</section>


    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/09/21/Google-releases-Allo-an-AI-infused-messaging-app/" title="Pre: Google releases Allo: an AI-infused messaging app">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="Mini Archives"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2016/09/17/StylishTheme-AsukaGoogle/" title="Next: StylishTheme_AsukaGoogle">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/09/21/Google-releases-Allo-an-AI-infused-messaging-app/">Google releases Allo: an AI-infused messaging app</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/18/One-Way-To-Handle-MIPS-OverFlow/">One Way To Handle MIPS OverFlow</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/17/StylishTheme-AsukaGoogle/">StylishTheme_AsukaGoogle</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/16/Dual-Booting-Or-Virtual-Machine-To-Learn-Linux/">Dual Booting Or Virtual Machine To Learn Linux?</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/14/阿里巴巴四员工编程抢月饼被开除/">阿里巴巴四员工编程抢月饼被开除</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/14/Death-Stranding-New-Details-from-TGS-2016-Open-World-Co-Op-4K-More/">Death Stranding - New Details from TGS 2016: Open World, Co-Op, 4K, & More!</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/12/BasicCSCheatSheet/">Basic CS Cheat Sheet</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/12/MarkDown-Cheat-Sheet/">MarkDown Cheat Sheet</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/11/First-Article/">First Article</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016 VinC Cheng
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="Site Visitors"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="Page Hits"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
    <script src="/js/GithubRepoWidget.js"></script>

<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 3;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
             github: ".github-widget a", 
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) SleepingzzZ" + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) VinC |HomePage" + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>